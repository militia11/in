/**
 * 
 */
package ServerTests;

/**
 * Import Sikuli
 */
import org.sikuli.basics.*;
import org.sikuli.script.*;

/**
 * Import JUnit
 */
import static org.junit.Assert.*;
import org.junit.*;

import java.lang.Thread.State;

import java.util.Scanner;
import static org.junit.Assert.*;

import org.junit.Test;

public class DatabaseSettingsTests {
	//Computer screen object
	private Screen screen;
		
	// Text next to found position
	private String recogniseText;
		
	// Target fields
	private Pattern targetSettings;	
	private Pattern targetDBConnection;
	
	/**
	 * @throws java.lang.Exception
	 */
	@Before
	public void setUp() throws Exception { 
			Settings.OcrTextRead = true;
			Settings.OcrTextSearch = true;	 
            
			screen = new Screen();
            targetSettings = new Pattern("./images/1441463959035.png");
            targetDBConnection = new Pattern("./images/114987846.png");
	}

	/**
	 * @throws java.lang.Exception
	 */
	@After
	public void tearDown() throws Exception {
	}
	
	@Test
	public void testInit() throws InterruptedException {
		screen.type("t", KeyModifier.CTRL + KeyModifier.ALT); //openApp("gnome-terminal")

		Thread.sleep(50);
		
		Thread.sleep(50);
		
		//full screen mode
	    //screen.type(Key.F11);
		
	    @SuppressWarnings("resource")
		Scanner userInput = new Scanner(System.in);
	    System.out.print("Please enter full path to " + "\n" + "Android Photos Archive executable file" + "\n" + "PATH=");
	    String path = userInput.next();
		
	    try {
			screen.click(targetSettings);  
		} catch (FindFailed e) {
			System.out.print("Can't find open Terminal");
			fail();
			// ZATRZYMANIE TESTOW !!!!!!!!!!111
		}	    
		// "~/Projekty/zssw/zssw.server/"path // póżniej zmienić na nazwę programu
		screen.type("cd " + path + Key.ENTER );
		screen.type("./app"+ Key.ENTER );		
		Thread.sleep(50);
		
		try {
			screen.find(targetDBConnection);  
		} catch (FindFailed e) {
			System.out.print("Can't run Android Photo Archive. Please check path and make sure executable file exist");
			fail();
			// ZATRZYMANIE TESTOW !!!!!!!!!!111
		}
	}
}